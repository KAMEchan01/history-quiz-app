# 要件定義の書き方ガイド（初心者向け）

## 1. 基本の5W1H で整理

### Why（なぜ）- 目的
**「なぜこのアプリを作るのか？」**
```markdown
例：
- 高校受験の歴史勉強を効率化したい
- 時代ごとに整理して覚えやすくしたい
- スマホでいつでも勉強できるようにしたい
```

### Who（だれ）- 対象ユーザー
**「だれが使うのか？」**
```markdown
例：
- 高校受験を控える中学3年生
- 歴史が苦手な中学生
- 日本史を教える先生
```

### What（なに）- 機能
**「どんな機能があるのか？」**
```markdown
例：
- 時代を選べる
- 一問一答形式のクイズ
- 点数が表示される
- 間違えた問題を振り返れる
```

### When（いつ）- 利用場面
**「いつ使うのか？」**
```markdown
例：
- 通学中の電車の中で
- 家での復習時間に
- テスト前の最終確認で
```

### Where（どこ）- 利用環境
**「どこで使うのか？」**
```markdown
例：
- スマートフォンで
- 家のパソコンで
- 学校のタブレットで
```

### How（どのように）- 実現方法
**「どうやって作るのか？」**
```markdown
例：
- Webアプリとして作る
- GitHub Pagesで公開
- HTML/CSS/JavaScriptを使用
```

## 2. 具体的な書き方テンプレート

### 【初心者向け】簡単テンプレート

#### ■ アプリの概要
```markdown
## アプリ名
History Quiz

## 一言で説明すると
高校受験の日本史を時代別に学習できるクイズアプリ

## なぜ作るのか
- 歴史の勉強を楽しくしたい
- 時代ごとに整理して覚えやすくしたい
- いつでもどこでも勉強できるようにしたい
```

#### ■ 使う人
```markdown
## メインユーザー
中学3年生（15歳前後）

## どんな人？
- 高校受験を控えている
- 歴史の暗記が苦手
- スマホに慣れている
- 隙間時間を活用したい
```

#### ■ 機能一覧
```markdown
## 必ず必要な機能（Must have）
1. 時代選択画面
   - 17の時代から選べる
   - 各時代の説明が見れる

2. クイズ機能
   - 一問一答形式
   - 20問出題
   - 正解/不正解がわかる

3. 結果表示
   - 点数表示
   - 正答率表示

## あったらいい機能（Should have）
1. 間違えた問題の復習
2. 過去の成績記録
3. 解説表示

## 将来的に欲しい機能（Could have）
1. ランキング機能
2. 友達との競争
3. 進捗グラフ
```

#### ■ 画面設計
```markdown
## 画面の流れ
1. トップ画面 → 2. 時代選択 → 3. クイズ → 4. 結果

## 各画面でできること
### 1. トップ画面
- アプリの説明
- 「始める」ボタン

### 2. 時代選択画面
- 17個の時代ボタン
- 各時代の簡単な説明

### 3. クイズ画面
- 問題文表示
- 答え入力欄
- 「次へ」ボタン
- 進捗表示（3/20問など）

### 4. 結果画面
- 得点表示
- 「もう一度」ボタン
- 「時代選択に戻る」ボタン
```

## 3. 書く時のコツ

### ✅ Good（良い例）
- **具体的**: 「20問出題する」「17の時代から選べる」
- **ユーザー目線**: 「中学生が電車で使える」
- **優先順位つき**: 「必須」「あったらいい」「将来的に」

### ❌ Bad（悪い例）
- **曖昧**: 「たくさん問題を出す」「色々な時代」
- **技術目線**: 「JSONでデータを管理する」
- **全部重要**: すべて「必須」にしてしまう

## 4. チェックリスト

要件定義を書いた後、以下をチェック：

□ 中学生でも理解できる言葉で書けているか？
□ 「なぜ作るのか」が明確か？
□ 機能に優先順位をつけているか？
□ 画面の流れがイメージできるか？
□ 1週間後に読み返しても理解できるか？

## 5. よくある失敗と対策

### 失敗例1: 機能を詰め込みすぎる
**問題**: 「ランキング機能も、SNS連携も、AIによる問題生成も...」
**対策**: まずは最低限の機能だけに絞る

### 失敗例2: 技術的な話ばかり
**問題**: 「Reactを使って、APIでデータを...」
**対策**: ユーザーにとっての価値を中心に書く

### 失敗例3: 曖昧すぎる表現
**問題**: 「使いやすいアプリにする」
**対策**: 「ボタンを大きくして、タップしやすくする」など具体的に

## 6. 実際のあなたのプロジェクトに当てはめると...

### あなたの歴史クイズアプリの場合
```markdown
## Why（なぜ）
高校受験の歴史勉強を効率化するため

## Who（だれ）
高校受験を控える中学生

## What（なに）
- 時代選択機能
- 一問一答クイズ
- 結果表示

## When（いつ）
隙間時間や復習時間に

## Where（どこ）
スマホやパソコンで

## How（どのように）
WebアプリとしてGitHub Pagesで公開
```

### 5.4 表示要件
- **問題文の読みやすさ**
- **進捗の視覚的表示**
- **結果の分かりやすい表示**# History Quiz 要件定義書
**娘さんの高校受験応援アプリ**

## 1. プロジェクト概要

### 🎯 なぜ作るのか（Why）
- **娘さんの社会（日本史）の成績向上のため**
- 紙の問題集の不便さを解消したい
  - 赤いフィルムでの回答隠しが面倒
  - 持ち運びが不便
  - 場所を選ばずに学習したい
- スマートフォンでいつでもどこでも学習できる環境を提供

### 👥 誰が使うのか（Who）
- **メインユーザー**: 中学3年生の娘さん
- **年齢**: 14-15歳の女子中学生
- **特徴**: 
  - 高校受験を控えている
  - 効率的に勉強したい
  - スマートフォンに慣れている

### 📱 いつ・どこで使うのか（When・Where）
- **通学中の電車やバスの中で**
- **休み時間や放課後に一人で集中して**
- **家での隙間時間に**
- **テスト前の最終確認で**
- **お風呂上がりのリラックスタイムに**

## 2. 解決したい課題

### 現在の問題点
1. **紙の問題集の不便さ**
   - 赤いフィルムでの回答隠しが手間
   - 持ち運びが重くて大変
   - 暗い場所では使えない

2. **学習の継続性**
   - 間違えた問題の管理が大変
   - 苦手分野の特定が困難
   - 進捗が見えにくい

3. **学習のモチベーション維持**
   - 継続的な学習が困難
   - 達成感を得にくい

## 3. 機能要件

### 🌟 必須機能（Must Have）
#### 3.1 時代選択機能
- **17の時代区分から選択可能**
  - 縄文時代〜令和時代
  - 各時代の基本情報表示（年代・特徴）
  - 時代ごとの問題数表示

#### 3.2 クイズ機能
- **時代別20問出題**
- **一問一答形式**
- **問題データの外部ファイル化**
  - JSONファイルから問題を読み込み
  - 問題の追加・修正が容易
- **UI改善**
  - 次の問題ボタンの位置固定
  - 問題文の長さに関わらず一定の場所に配置

#### 3.3 採点・結果表示
- **リアルタイム正解数表示**
- **最終結果画面**
  - 正解数/20問
  - 正答率（％）
  - 励ましのメッセージ

#### 3.4 復習機能
- **間違えた問題の一覧表示**
- **苦手問題のみの出題モード**
- **再挑戦機能**

#### 3.5 レスポンシブデザイン
- **スマートフォン最優先**
- タブレット・PC対応

#### 3.6 音響効果機能 🎵
- **正解時の音声フィードバック**
  - 基本正解音：「正解！」「やった！」「すごい！」
  - 特別正解音：
    - 10問連続正解：「すばらしい！」
    - 20問全問正解：「パーフェクト！」
    - 連続正解時の段階的音声変化
- **BGM機能**
  - 沖縄の海イメージ：波の音
  - 夜の雨音＋雷音（集中モード）
- **音響設定機能**
  - 音声ON/OFF切り替え
  - BGM音量調整
  - 効果音音量調整
  - 電車内モード（完全消音）

#### 3.7 テーマ・デザイン切り替え機能 🌊
- **沖縄の海テーマ**
  - ブルー系の美しいグラデーション
  - 海をイメージした背景
  - 明るく爽やかな雰囲気
- **夜の雨テーマ**
  - 薄暗い落ち着いた背景
  - 集中できる静寂な雰囲気
- **設定画面でテーマ選択**

#### 3.8 学習記録機能
- **進捗の可視化**
- **過去の成績履歴**
- **時代別の得意・苦手分析**
- **毎日10分の学習習慣サポート**
  - 学習時間の記録
  - 連続学習日数の表示
  - 毎日の目標達成状況


### 🚀 将来的な機能（Could Have）
- **解説表示機能**
- **学習リマインダー機能**
- **カスタム音声録音機能**（お父さんの声で「正解！」など）
- **季節限定テーマ**（桜、夏祭り、雪景色など）
- **選択式問題対応**（4択問題など）
- **オフライン学習モード**（ネットワーク不要）
- **関連問題の自動推薦機能**

## 4. 技術要件

### 4.1 フロントエンド
- **HTML5 + CSS3 + JavaScript（ES6+）**
- **レスポンシブデザイン**
- **PWA対応（将来的に）**

### 4.2 データ管理
- **JSON形式での問題データ管理**
- **ローカルストレージでの進捗保存**
- **外部ファイルからのデータ読み込み**
- **エラーハンドリング機能**（ネットワーク不良時の対応）
- **オフラインデータキャッシュ機能**
- **データ構造の拡張性確保**

### 4.3 ホスティング
- **GitHub Pages での無料ホスティング**
- **独自ドメイン対応（オプション）**

### 4.4 音響システム
- **Web Audio API**での音声制御
- **音声ファイル**の効率的な読み込み
- **ローカルストレージ**での音響設定保存

## 5. UI/UX要件

### 5.1 デザインコンセプト
- **女子中学生が使いたくなるデザイン**
- **沖縄の海をイメージしたブルー系**
  - 明るい水色から深い海の青まで
  - 爽やかで美しいグラデーション
- **2つのテーマ切り替え**
  - 海テーマ：明るく開放的
  - 雨テーマ：落ち着いて集中できる
- **直感的で分かりやすい操作**

### 5.2 操作性
- **ワンタップで次の問題へ**
- **ボタンの位置固定**
- **大きなタップエリア**
- **分かりやすいナビゲーション**

### 5.3 音響・体験設計
- **正解時の達成感**
  - 段階的な音声フィードバック
  - 連続正解時の特別演出
- **集中できる環境音**
  - 波の音での癒し効果
  - 雨音での集中効果
- **設定の柔軟性**
  - 電車内でも使えるサイレントモード
  - 個人の好みに合わせた音量調整

## 6. データ構造設計

### 6.1 時代マスターデータ
```json
{
  "eras": [
    {
      "id": "jomon",
      "name": "縄文時代",
      "period": "紀元前14000年頃～紀元前300年頃",
      "description": "土器と狩猟採集の時代",
      "color": "#8B4513",
      "questionCount": 50,
      "difficulty": {
        "easy": 20,
        "medium": 20,
        "hard": 10
      }
    }
  ]
}
```

### 6.2 問題データ（改善版）
```json
{
  "era": "jomon",
  "metadata": {
    "totalQuestions": 50,
    "difficulty": {
      "easy": 20,
      "medium": 20,
      "hard": 10
    },
    "lastUpdated": "2024-01-15"
  },
  "questions": [
    {
      "id": "jomon_001",
      "question": "縄文土器の特徴として正しいものはどれか。",
      "choices": [
        "縄目の文様がついている",
        "表面がつるつるしている", 
        "金属で作られている",
        "文字が書かれている"
      ],
      "correctAnswer": 0,
      "answer": "縄目の文様がついている",
      "explanation": "縄文土器は縄を押し付けて文様をつけた土器です。縄文時代の名前の由来でもあります。",
      "difficulty": 1,
      "category": "文化",
      "tags": ["土器", "工芸", "基本"],
      "relatedQuestions": ["jomon_002", "jomon_015"]
    }
  ]
}
```

### 6.3 学習進捗データ
```json
{
  "userId": "daughter",
  "stats": {
    "totalQuestionsAnswered": 340,
    "correctAnswers": 272,
    "overallAccuracy": 80.0,
    "studyStreak": 12,
    "totalStudyTimeMinutes": 450
  },
  "eraProgress": {
    "jomon": {
      "questionsAnswered": 20,
      "correctAnswers": 16,
      "accuracy": 80.0,
      "lastStudied": "2024-01-15T10:30:00Z",
      "masteryLevel": "good"
    }
  },
  "wrongAnswers": [
    {
      "questionId": "jomon_003",
      "attempts": 3,
      "lastAttempt": "2024-01-15T10:25:00Z",
      "needsReview": true
    }
  ],
  "preferences": {
    "soundEnabled": true,
    "bgmVolume": 0.3,
    "effectVolume": 0.7,
    "theme": "ocean",
    "studyReminder": "18:00"
  }
}
```

### 6.4 設定・テーマデータ
```json
{
  "themes": {
    "ocean": {
      "name": "沖縄の海",
      "primaryColor": "#4A90E2",
      "secondaryColor": "#87CEEB",
      "backgroundColor": "linear-gradient(135deg, #87CEEB 0%, #4A90E2 100%)",
      "buttonColor": "#FF6B6B",
      "textColor": "#2C3E50",
      "bgmFile": "ocean-waves.mp3"
    },
    "night": {
      "name": "夜の雨",
      "primaryColor": "#2C3E50",
      "secondaryColor": "#34495E",
      "backgroundColor": "linear-gradient(135deg, #2C3E50 0%, #34495E 100%)",
      "buttonColor": "#3498DB",
      "textColor": "#ECF0F1",
      "bgmFile": "night-rain.mp3"
    }
  },
  "sounds": {
    "correct": [
      {"file": "correct1.mp3", "text": "正解！"},
      {"file": "correct2.mp3", "text": "やったね！"},
      {"file": "perfect.mp3", "text": "パーフェクト！", "condition": "streak >= 20"}
    ]
  }
}
```

### 6.5 エラーハンドリング・オフライン対応
```json
{
  "errors": {
    "NETWORK_ERROR": {
      "message": "インターネット接続を確認してください",
      "action": "retry",
      "fallback": "offline_mode"
    },
    "DATA_LOAD_ERROR": {
      "message": "問題データの読み込みに失敗しました",
      "action": "reload",
      "fallback": "cached_data"
    }
  },
  "offlineData": {
    "lastSync": "2024-01-15T09:00:00Z",
    "availableEras": ["jomon", "yayoi"],
    "questionCount": 40
  }
}
```

## 7. ファイル構成

```
history-quiz/
├── index.html              # ホーム画面
├── pages/
│   ├── era-selection.html  # 時代選択画面
│   ├── quiz.html          # クイズ画面
│   └── result.html        # 結果画面
├── css/
│   ├── style.css          # メインスタイル
│   └── mobile.css         # スマホ対応
├── js/
│   ├── app.js            # メインアプリ
│   ├── quiz-engine.js    # クイズ機能
│   └── data-loader.js    # データ読み込み
├── data/
│   ├── eras.json         # 時代マスタ
│   └── questions/        # 問題データ
│       ├── jomon.json
│       ├── yayoi.json
│       └── ...
├── assets/
    ├── images/           # 背景画像・アイコン
    ├── audio/           # 音声ファイル
    │   ├── correct/     # 正解音声
    │   │   ├── basic1.mp3    # 「正解！」
    │   │   ├── basic2.mp3    # 「やった！」
    │   │   ├── basic3.mp3    # 「すごい！」
    │   │   ├── streak10.mp3  # 「すばらしい！」
    │   │   └── perfect.mp3   # 「パーフェクト！」
    │   └── bgm/         # 背景音
    │       ├── ocean-waves.mp3   # 波の音
    │       └── night-rain.mp3    # 雨音＋雷音
    └── themes/          # テーマ関連ファイル
```

## 8. 開発スケジュール

### Phase 1: 基盤作成（1週間）
- [x] 要件定義完成
- [ ] GitHub リポジトリ作成
- [ ] 基本HTML構造作成
- [ ] 時代選択画面作成

### Phase 2: コア機能実装（1週間）
- [ ] 問題データ構造設計
- [ ] クイズエンジン実装
- [ ] UI改善（ボタン位置固定）
- [ ] レスポンシブデザイン
- [ ] 音響システム基盤実装

### Phase 3: 機能拡張（1-2週間）
- [ ] 復習機能実装
- [ ] 音声フィードバック実装
- [ ] BGM・環境音実装
- [ ] テーマ切り替え機能
- [ ] 学習記録機能
- [ ] デバッグ・調整

### Phase 4: デプロイ・テスト（数日）
- [ ] GitHub Pages デプロイ
- [ ] 娘さんでのテスト
- [ ] フィードバック反映

## 9. 成功指標

### 定量的指標
- [ ] 全17時代の問題実装完了
- [ ] スマートフォンでの快適な操作
- [ ] 問題データの外部ファイル化完了
- [ ] ボタン位置の固定化完了
- [ ] 音響システムの実装完了
- [ ] 2つのテーマ切り替え機能完了
- [ ] 毎日10分の学習時間達成

### 定性的指標
- [ ] 娘さんが毎日使ってくれる
- [ ] 「楽しい」「癒される」と言ってもらえる
- [ ] 集中して学習できる環境の提供
- [ ] 社会の成績向上に貢献

## 10. 備考

### 🎯 特に重要なポイント
1. **娘さんの使いやすさ最優先**
2. **スマートフォンでの操作性**
3. **音響による学習体験の向上**
4. **沖縄の海の思い出を活かしたデザイン**
5. **毎日10分の継続可能な学習習慣**
6. **個人で集中できる学習環境**
7. **問題の管理しやすさ**

### 💡 開発時の注意点
- 娘さんの意見を定期的に聞く
- 音響効果のテストを重視する
- 電車内での使用を考慮したサイレント機能
- 楽しく学習できる雰囲気作り
- 沖縄の思い出が蘇るような美しいデザイン
- 一人でもモチベーションを維持できる仕組み